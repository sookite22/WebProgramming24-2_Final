<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>입을지도 (Map Your Style)</title>
    <link rel="stylesheet" href="css/main.css">
    <link rel="stylesheet" href="css/banner.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/awesomplete/1.1.5/awesomplete.min.css" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/awesomplete/1.1.5/awesomplete.min.js"></script>
</head>
<body>
    <header><!-- 헤더 -->
        <div class="logo">입을지도</div>
        <nav>
            <ul>
                <li><a href="map.html" class="button">지도</a></li>
                <li><a href="review.html" class="button">커뮤니티</a></li>
                <li><a href="recommend.html" class="button">추천 리스트</a></li>
            </ul>
        </nav>
        <div class="auth">
            <input type="text" id="searchInput" placeholder="여행지 검색..." oninput="handleSearch()" class="awesomplete" />
            <button id="searchButton" onclick="executeSearch()">검색</button>
            <button id="loginButton" onclick="toggleSideMenu()">Home</button>
        </div>
    </header>    

    <div id="sideMenu" class="side-menu">
        <button id="closeMenuButton" onclick="toggleMenu()">×</button>
        <h3>마이페이지</h3>
        <p>안녕하세요, <span id="usernameDisplay">사용자</span>님!</p>
        <ul>
            <li><a href="profile.html">프로필 수정</a></li>
            <li><a href="review.html">내가 쓴 글</a></li>
            <li><button onclick="viewFavorites()">즐겨찾기</button></li>
            <li><a href="javascript:void(0)" onclick="logout()">로그아웃</a></li>
        </ul>
    </div>
    
    <!-- 이미지 배너 -->
    <div id="imageSlide">
        <div id="slides">
            <img src="img/banner1.jpg" alt="banner1" onclick="window.location.href='destination1.html'">
            <img src="img/banner2_에버랜드.jpg" alt="banner2" onclick="window.location.href='destination2.html'">
            <img src="img/banner3.jpg" alt="banner3" onclick="window.location.href='destination3.html'">
            <img src="img/banner4.jpg" alt="banner4" onclick="window.location.href='destination4.html'">
        </div>
        <button id="prev">&lang;</button>
        <button id="next">&rang;</button>
    </div>

    <!-- 오늘의 인기 여행지 -->
    <section class="popular-destinations" id="home">
        <h2>오늘의 인기 여행지</h2>
        <div class="cards">
            <div class="card">
                <a target="_blank" href="https://royal.khs.go.kr/ROYAL/contents/R101020000.do?schBdcode=gbg&pageType=story&bdProgramCode=storyCtg3" class="card">
                <img src="./img/banner4.jpg" alt="여행지 1"></a>
                <h3>광화문</h3>
                <p>서울의 랜드마크</p>
            </div>
            <div class="card">
                <a target="_blank" href="https://travel.naver.com/overseas/JPTYO298184/city/summary" class="card">
                <img src="./img/Tokyo.jpg" alt="여행지 2"></a>
                <h3>도쿄</h3>
                <p>현대적이면서도 전통적인 도시</p>
            </div>
            <div class="card">
                <a target="_blank" href="https://blog.naver.com/jeonjuhanok1004" class="card">
                <img src="./img/banner1.jpg" alt="여행지 3"></a>
                <h3>전주 한옥마을</h3>
                <p>한옥만의 특별한 감성</p>
            </div>
        </div>
    </section>

    <!-- 최신 인기 아이템 -->
    <section class="trending-items" id="recommend">
        <h2>최신 인기 아이템</h2>
        <div class="items">
            <div class="item">
                <img src="item1.jpg" alt="아이템 1">
                <h4>가벼운 아우터</h4>
                <p>가을철 필수 아이템</p>
            </div>
            <div class="item">
                <img src="item2.jpg" alt="아이템 2">
                <h4>방수 신발</h4>
                <p>비 오는 날에도 스타일리시하게</p>
            </div>
            <div class="item">
                <img src="item3.jpg" alt="아이템 3">
                <h4>포근한 스웨터</h4>
                <p>추운 날씨에도 따뜻하게</p>
            </div>
        </div>
    </section>

    <footer><!-- 푸터 -->
        <p>© 2024 입을지도 | All Rights Reserved</p>
        <div id="footer-info">
            <a href="#">Instagram</a>
            <a href="#">Facebook</a>
            <a href="#">Twitter</a>
        </div>
    </footer>
    <script src="js/imageSlide.js"></script>
    <script src="js/search.js"></script>
    <script>
        // 페이지 로드 시 로그인 상태 확인
        window.onload = function() {
            if (localStorage.getItem('isLoggedIn') === 'true') {
                // 로그인 상태일 경우 로그인 버튼을 "Home"으로 변경
                document.getElementById('loginButton').textContent = 'Home';
                // 로그인된 사용자명 표시
                document.getElementById('usernameDisplay').textContent = localStorage.getItem('username');
            } else {
                // 로그인 안되어 있으면 로그인 페이지로 이동
                document.getElementById('loginButton').onclick = function() {
                    window.location.href = 'login.html';
                };
            }
        };

        // 사이드 메뉴 열기 / 닫기
        function toggleSideMenu() {
            const sideMenu = document.getElementById('sideMenu');
            sideMenu.classList.toggle('open'); // open 클래스 토글
        }
        // 로그아웃 처리
        function logout() {
            alert('로그아웃 되었습니다.');

            localStorage.removeItem('isLoggedIn');
            localStorage.removeItem('username');
            // 사이드 메뉴 닫기
            document.getElementById('sideMenu').classList.remove('open');
            // 홈 버튼 텍스트 변경
            document.getElementById('loginButton').textContent = '로그인';
            // 홈 페이지로 리디렉션
            window.location.href = 'main.html'; // 홈 페이지로 리디렉션
        }

        // 저장된 즐겨찾기 데이터 확인
        function viewFavorites() {
            const favorites = JSON.parse(localStorage.getItem("favorites")) || [];
            if (favorites.length === 0) {
                alert("저장된 즐겨찾기가 없습니다.");
            } else {
                const favoriteList = favorites.map(fav => `${fav.title} (${fav.lat}, ${fav.lng})`).join("\n");
                alert(`즐겨찾기 목록:\n${favoriteList}`);
            }
        }
    </script>
</body>
</html>